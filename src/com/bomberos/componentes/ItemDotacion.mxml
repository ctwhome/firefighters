<?xml version="1.0" encoding="utf-8"?>
<componentes:ItemLista xmlns:fx="http://ns.adobe.com/mxml/2009" 
					   xmlns:s="library://ns.adobe.com/flex/spark" xmlns:componentes="com.bomberos.componentes.*"
					   creationComplete="init()"
					  >
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	


	<fx:Script>
		<![CDATA[
			
			//-----------------------------------
			//  Parámetros del objeto
			//-----------------------------------			
			[Bindable] public var nombre:String; 
			[Bindable] public var tipo:String; 				
			[Bindable] public var cisterna:String;
			[Bindable] public var anemo:String;
			[Bindable] public var vele:String;
//					   private var imgExplo:String;			// Elige la imagen que se muestra
			[Bindable] public var dir:String;				// Permite centrar la situación del elemento con sus coordenadas propias 
			
			
			private var select:Boolean=false;
			[Bindable] private var img_dot:String;
			
			import com.bomberos.clases.Llamada;
			import com.bomberos.clases.ClaseDispatcher;
			
			private var dispatcher:ClaseDispatcher;
			//-----------------------------------
			//  FUNCIONES DEL OBJETO LISTA
			//-----------------------------------
			// Al activarse el item de la lista
			// selecciona las variables que se muestran
			private function init():void{
				
				var n_c:Number = Number(cisterna);
				
				// Separación entre dotación y cisterna
				if (tipo=="dotacion"){img_dot="assets/listas/item_dotacion.png"}
				else {img_dot="assets/listas/item_cisterna.png"}
				
				//-----------------------------------
				//  Color del cisterna
				//-----------------------------------
				
				if (n_c < 21){	c_id.setStyle("color", 0xFF0000)}   	// Rojo
				if ((n_c > 20) && (n_c <51))	{c_id.setStyle("color", 0xFF931E)}  					// Naranja
				if (n_c > 50) {c_id.setStyle("color", 0x009245)}   	// Verde
			
			
				
				// Añade el listener para cuando el item es pulsado
				addEventListener(MouseEvent.CLICK, pulsado);
			
			}
			

			//-----------------------------------------------------------------
			// Se inicia cuando el objeto es pulsado en la lista
			//-----------------------------------------------------------------			
			private function pulsado(e:MouseEvent):void{
				// Enviar la señál de liberar y pulsar el propio

				//Pulsar el propio
				 
				if (!select){fondo.color = 0xfce0e3 }
				else 		{fondo.color = 0xf7f7f7 }
				select = !select;
				
				
				dispatcher = ClaseDispatcher.getInstancia();
				dispatcher.dispatchEvent(new Llamada(Llamada.ACCION,'UNIDADES',dir));
			}
			
		]]>
	</fx:Script>
	
	<s:Rect width="100%" height="100%">
		<s:fill>
			<s:SolidColor id="fondo" color="#f7f7f7"/>
		</s:fill>
	</s:Rect>
	<s:Image id="id_img" width="227" height="56" source="{img_dot}"/>
	<s:Label x="42" y="6" fontSize="17" fontWeight="bold" text="{nombre}"/>
	<s:Label id="c_id" left="62" top="30" fontSize="15" fontWeight="bold" text="{cisterna}%"/>
	<s:Label left="134" top="30" fontSize="15" fontWeight="bold" text="{anemo}"/>
	<s:Label left="189" top="30" fontWeight="bold" text="{vele}"/>
	

</componentes:ItemLista>
